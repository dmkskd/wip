<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Gods & Civilizations - Three Worlds</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #87CEEB 0%, #98D8C8 25%, #F7DC6F 50%, #F8B500 75%, #FAD7A0 100%);
            background-attachment: fixed;
            min-height: 100vh;
            color: #2c3e50;
        }
        .container { max-width: 800px; margin: 0 auto; padding: 20px; }
        
        /* World Select */
        .world-select { text-align: center; padding: 40px 20px; }
        .main-title { font-size: 2.5em; color: #1a5276; margin-bottom: 10px; text-shadow: 2px 2px 4px rgba(255,255,255,0.8); }
        .main-subtitle { font-size: 1.2em; color: #2874a6; margin-bottom: 30px; }
        .worlds-container { display: flex; gap: 20px; justify-content: center; flex-wrap: wrap; }
        .world-card {
            background: rgba(255,255,255,0.85);
            border-radius: 20px;
            padding: 25px;
            width: 240px;
            cursor: pointer;
            transition: all 0.3s ease;
            border: 3px solid transparent;
            backdrop-filter: blur(10px);
            overflow: hidden;
            box-shadow: 0 8px 32px rgba(0,0,0,0.1);
        }
        .world-card:hover { transform: translateY(-10px); }
        .world-card.w1:hover { border-color: #f39c12; box-shadow: 0 15px 40px rgba(243,156,18,0.3); }
        .world-card.w2:hover { border-color: #3498db; box-shadow: 0 15px 40px rgba(52,152,219,0.3); }
        .world-card.w3:hover { border-color: #27ae60; box-shadow: 0 15px 40px rgba(39,174,96,0.3); }
        .world-icon { font-size: 3.5em; margin-bottom: 12px; }
        .world-title { font-size: 1.3em; margin-bottom: 8px; }
        .world-card.w1 .world-title { color: #d35400; }
        .world-card.w2 .world-title { color: #2980b9; }
        .world-card.w3 .world-title { color: #27ae60; }
        .world-desc { color: #555; font-size: 0.85em; line-height: 1.4; }
        .world-badge {
            display: inline-block; padding: 4px 12px; border-radius: 12px;
            font-size: 0.75em; margin-top: 12px;
        }
        .w1 .world-badge { background: rgba(243,156,18,0.2); color: #d35400; }
        .w2 .world-badge { background: rgba(52,152,219,0.2); color: #2980b9; }
        .w3 .world-badge { background: rgba(39,174,96,0.2); color: #27ae60; }

        /* Start Screen */
        .start-screen { display: none; text-align: center; padding: 40px 20px; position: relative; }
        .back-btn {
            position: absolute; top: 10px; left: 10px;
            padding: 10px 20px; background: rgba(255,255,255,0.8);
            border: none; border-radius: 10px; color: #2c3e50; cursor: pointer;
            font-weight: bold; box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        .back-btn:hover { background: rgba(255,255,255,1); }
        .game-icon { font-size: 60px; margin-bottom: 20px; animation: float 3s ease-in-out infinite; }
        @keyframes float { 0%, 100% { transform: translateY(0); } 50% { transform: translateY(-15px); } }
        .game-title { font-size: 2.2em; color: #1a5276; margin-bottom: 10px; text-shadow: 2px 2px 4px rgba(255,255,255,0.8); }
        .game-title.w2 { color: #2874a6; }
        .game-title.w3 { color: #1e8449; }
        .game-subtitle { font-size: 1.1em; color: #2c3e50; margin-bottom: 15px; }
        .endless-badge {
            display: inline-block; padding: 8px 20px;
            background: linear-gradient(135deg, #9b59b6, #8e44ad);
            border-radius: 20px; margin-bottom: 20px; animation: pulse 2s infinite;
            color: #fff;
        }
        @keyframes pulse { 0%, 100% { transform: scale(1); } 50% { transform: scale(1.05); } }
        .game-desc { color: #555; margin-bottom: 25px; line-height: 1.6; }
        .start-btn {
            padding: 18px 50px; font-size: 1.3em;
            background: linear-gradient(135deg, #f39c12, #e67e22);
            border: none; border-radius: 20px; color: #fff;
            cursor: pointer; font-weight: bold; transition: all 0.3s ease;
            box-shadow: 0 5px 20px rgba(243,156,18,0.4);
        }
        .start-btn.w2 { background: linear-gradient(135deg, #3498db, #2980b9); box-shadow: 0 5px 20px rgba(52,152,219,0.4); }
        .start-btn.w3 { background: linear-gradient(135deg, #27ae60, #1e8449); box-shadow: 0 5px 20px rgba(39,174,96,0.4); }
        .start-btn:hover { transform: scale(1.05); }
        .level-preview { display: flex; justify-content: center; gap: 8px; margin-top: 25px; flex-wrap: wrap; }
        .level-dot { padding: 5px 12px; border-radius: 15px; font-size: 0.75em; font-weight: bold; }
        .dot-cakewalk { background: rgba(46,204,113,0.3); color: #1e8449; }
        .dot-easy { background: rgba(52,152,219,0.3); color: #2874a6; }
        .dot-ok { background: rgba(241,196,15,0.4); color: #9a7d0a; }
        .dot-hard { background: rgba(231,76,60,0.3); color: #c0392b; }
        .dot-extreme { background: rgba(155,89,182,0.3); color: #7d3c98; }

        /* Game Screen */
        .game-screen { display: none; }
        .game-header {
            display: flex; justify-content: space-between; align-items: center;
            padding: 12px 18px; background: rgba(255,255,255,0.85);
            border-radius: 15px; margin-bottom: 12px; flex-wrap: wrap; gap: 8px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
        }
        .world-ind {
            font-size: 0.85em; padding: 4px 12px; border-radius: 10px;
            width: 100%; text-align: center; margin-bottom: 5px; font-weight: bold;
        }
        .world-ind.w1 { background: rgba(243,156,18,0.2); color: #d35400; }
        .world-ind.w2 { background: rgba(52,152,219,0.2); color: #2874a6; }
        .world-ind.w3 { background: rgba(39,174,96,0.2); color: #1e8449; }
        .level-ind { font-size: 1.1em; font-weight: bold; color: #d35400; }
        .score-disp { font-size: 1em; color: #2874a6; font-weight: bold; }
        .round-disp {
            font-size: 0.9em; color: #1e8449; width: 100%; text-align: center;
            padding-top: 5px; border-top: 1px solid rgba(0,0,0,0.1); margin-top: 3px; font-weight: bold;
        }
        .progress-bar {
            width: 100%; height: 10px; background: rgba(255,255,255,0.5);
            border-radius: 10px; margin-bottom: 20px; overflow: hidden;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
        }
        .progress-fill { height: 100%; border-radius: 10px; transition: width 0.5s ease; }
        .question-card {
            background: rgba(255,255,255,0.9); border-radius: 20px;
            padding: 25px; margin-bottom: 15px;
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255,255,255,0.5);
            box-shadow: 0 8px 32px rgba(0,0,0,0.1);
            color: #2c3e50;
        }
        /* Question Image */
        .question-image {
            text-align: center;
            font-size: 4em;
            margin-bottom: 15px;
            padding: 20px;
            background: linear-gradient(135deg, rgba(243,156,18,0.1), rgba(52,152,219,0.1));
            border-radius: 15px;
            animation: gentle-bounce 2s ease-in-out infinite;
        }
        @keyframes gentle-bounce {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-5px); }
        }
        
        .q-type {
            display: inline-block; padding: 5px 12px;
            background: rgba(243,156,18,0.2); border-radius: 15px;
            font-size: 0.8em; color: #d35400; margin-bottom: 12px; font-weight: bold;
        }
        .q-text { font-size: 1.2em; margin-bottom: 20px; line-height: 1.5; color: #2c3e50; }
        .answers { display: flex; flex-direction: column; gap: 10px; }
        .ans-btn {
            padding: 14px 20px; font-size: 1em;
            background: rgba(52,152,219,0.1); border: 2px solid rgba(52,152,219,0.3);
            border-radius: 10px; color: #2c3e50; cursor: pointer; transition: all 0.3s ease; text-align: left;
        }
        .ans-btn:hover { background: rgba(52,152,219,0.2); border-color: #3498db; transform: translateX(5px); }
        .ans-btn.correct { background: rgba(46,204,113,0.3); border-color: #27ae60; }
        .ans-btn.incorrect { background: rgba(231,76,60,0.3); border-color: #e74c3c; }
        .ans-btn:disabled { cursor: not-allowed; }

        /* Riddle */
        .riddle-box {
            background: linear-gradient(135deg, rgba(155,89,182,0.15), rgba(142,68,173,0.15));
            border: 2px solid #9b59b6; border-radius: 15px;
            padding: 20px; margin-bottom: 20px; text-align: center;
        }
        .riddle-icon { font-size: 2em; margin-bottom: 10px; }
        .riddle-text { font-size: 1.1em; font-style: italic; line-height: 1.6; color: #5b2c6f; }
        .riddle-input {
            width: 100%; padding: 15px; font-size: 1.1em; text-align: center;
            border: 2px solid rgba(155,89,182,0.5); border-radius: 10px;
            background: rgba(255,255,255,0.8); color: #2c3e50;
            text-transform: uppercase; letter-spacing: 2px; margin-top: 15px;
        }
        .riddle-input:focus { outline: none; border-color: #9b59b6; }
        .riddle-hint {
            margin-top: 12px; padding: 10px; background: rgba(155,89,182,0.1);
            border-radius: 8px; font-size: 0.9em; color: #7d3c98;
        }

        /* Matching */
        .match-container { display: flex; justify-content: space-around; gap: 20px; flex-wrap: wrap; }
        .match-col { display: flex; flex-direction: column; gap: 10px; }
        .match-col h4 { text-align: center; color: #d35400; margin-bottom: 5px; font-size: 0.9em; }
        .match-item {
            padding: 12px 18px; background: rgba(52,152,219,0.1);
            border: 2px solid rgba(52,152,219,0.3); border-radius: 8px;
            cursor: pointer; transition: all 0.3s ease; text-align: center; min-width: 110px; font-size: 0.9em;
            color: #2c3e50;
        }
        .match-item:hover { background: rgba(52,152,219,0.2); }
        .match-item.selected { border-color: #f39c12; background: rgba(243,156,18,0.2); }
        .match-item.matched { border-color: #27ae60; background: rgba(39,174,96,0.2); }
        .match-item.wrong { border-color: #e74c3c; background: rgba(231,76,60,0.2); animation: shake 0.4s ease; }
        @keyframes shake { 0%, 100% { transform: translateX(0); } 25% { transform: translateX(-6px); } 75% { transform: translateX(6px); } }

        /* Multiple Choice */
        .choices-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 10px; }
        .choice-btn {
            padding: 12px 15px; font-size: 0.95em;
            background: rgba(52,152,219,0.1); border: 2px solid rgba(52,152,219,0.3);
            border-radius: 10px; color: #2c3e50; cursor: pointer; transition: all 0.3s ease; text-align: center;
        }
        .choice-btn:hover { background: rgba(52,152,219,0.2); border-color: #3498db; }
        .choice-btn.correct { background: rgba(39,174,96,0.3); border-color: #27ae60; }
        .choice-btn.incorrect { background: rgba(231,76,60,0.3); border-color: #e74c3c; }

        /* Order */
        .order-list { display: flex; flex-direction: column; gap: 8px; }
        .order-item {
            display: flex; align-items: center; gap: 10px;
            padding: 12px 15px; background: rgba(52,152,219,0.1);
            border: 2px solid rgba(52,152,219,0.3); border-radius: 8px;
            cursor: move; transition: all 0.3s ease; font-size: 0.9em; color: #2c3e50;
        }
        .order-item:hover { background: rgba(52,152,219,0.2); }
        .order-item.dragging { opacity: 0.5; border-color: #f39c12; }
        .order-num {
            width: 26px; height: 26px; background: #f39c12; color: #fff;
            border-radius: 50%; display: flex; align-items: center; justify-content: center;
            font-weight: bold; flex-shrink: 0; font-size: 0.85em;
        }

        /* Submit & Write */
        .submit-btn {
            display: block; width: 100%; padding: 14px; margin-top: 15px;
            font-size: 1.1em; background: linear-gradient(135deg, #f39c12, #e67e22);
            border: none; border-radius: 10px; color: #fff;
            cursor: pointer; font-weight: bold; transition: all 0.3s ease;
            box-shadow: 0 4px 15px rgba(243,156,18,0.3);
        }
        .submit-btn:hover { transform: scale(1.02); }
        .submit-btn:disabled { opacity: 0.5; cursor: not-allowed; transform: none; }
        .write-input {
            width: 100%; padding: 15px; font-size: 1em;
            border: 2px solid rgba(52,152,219,0.3); border-radius: 10px;
            background: rgba(255,255,255,0.8); color: #2c3e50; min-height: 80px; resize: vertical;
        }
        .write-input:focus { outline: none; border-color: #3498db; }

        /* Feedback */
        .feedback {
            text-align: center; padding: 15px; margin-top: 15px;
            border-radius: 10px; font-size: 1.1em; display: none;
        }
        .feedback.correct { background: rgba(39,174,96,0.2); border: 2px solid #27ae60; color: #1e8449; }
        .feedback.incorrect { background: rgba(231,76,60,0.2); border: 2px solid #e74c3c; color: #c0392b; }
        .feedback.neutral { background: rgba(52,152,219,0.2); border: 2px solid #3498db; color: #2874a6; }
        .fun-fact {
            background: rgba(155,89,182,0.15); border: 2px solid #9b59b6;
            padding: 15px; border-radius: 10px; margin-top: 15px; display: none;
        }
        .fun-fact-title { color: #7d3c98; font-weight: bold; margin-bottom: 5px; }
        #funFactText { color: #5b2c6f; }
        .next-btn {
            display: none; width: 100%; padding: 15px; margin-top: 15px;
            font-size: 1.1em; background: linear-gradient(135deg, #3498db, #2980b9);
            border: none; border-radius: 10px; color: #fff;
            cursor: pointer; font-weight: bold; transition: all 0.3s ease;
            box-shadow: 0 4px 15px rgba(52,152,219,0.3);
        }
        .next-btn:hover { transform: scale(1.02); }
        .next-btn.level-done { background: linear-gradient(135deg, #27ae60, #1e8449); box-shadow: 0 4px 15px rgba(39,174,96,0.3); }

        /* City */
        .city-box {
            background: linear-gradient(180deg, #87CEEB 0%, #98D8C8 50%, #90EE90 100%);
            border-radius: 15px; padding: 20px; margin-top: 20px; min-height: 70px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
        }
        .city-title { text-align: center; color: #1e8449; margin-bottom: 10px; font-size: 0.95em; font-weight: bold; }
        .city-items { display: flex; justify-content: center; gap: 8px; flex-wrap: wrap; font-size: 1.8em; }
        .city-item { animation: pop 0.5s ease; }
        @keyframes pop { 0% { transform: scale(0); } 50% { transform: scale(1.3); } 100% { transform: scale(1); } }

        /* Level Complete */
        .level-complete { display: none; text-align: center; padding: 30px 20px; }
        .lc-title { font-size: 2em; color: #d35400; margin-bottom: 12px; text-shadow: 2px 2px 4px rgba(255,255,255,0.5); }
        .lc-score { font-size: 1.1em; color: #2c3e50; margin-bottom: 15px; }
        .lc-badge {
            display: inline-block; padding: 12px 25px;
            background: linear-gradient(135deg, #f39c12, #e67e22);
            color: #fff; border-radius: 25px; font-size: 1.1em; font-weight: bold; margin: 15px 0;
            box-shadow: 0 4px 15px rgba(243,156,18,0.3);
        }
        .stats-row { display: flex; justify-content: center; gap: 12px; flex-wrap: wrap; margin: 15px 0; }
        .stat-box {
            background: rgba(255,255,255,0.8); border-radius: 10px;
            padding: 12px 20px; min-width: 90px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        .stat-num { font-size: 1.4em; color: #d35400; font-weight: bold; }
        .stat-label { color: #555; font-size: 0.75em; }
        .city-preview {
            background: linear-gradient(180deg, #87CEEB 0%, #98D8C8 50%, #90EE90 100%);
            border-radius: 12px; padding: 15px; margin: 15px 0;
        }
        .city-preview .city-title { color: #1e8449; }
        .city-preview-items { display: flex; justify-content: center; gap: 6px; flex-wrap: wrap; font-size: 1.6em; }
        .next-preview { background: rgba(255,255,255,0.8); border-radius: 12px; padding: 20px; margin: 15px 0; box-shadow: 0 2px 10px rgba(0,0,0,0.1); }
        .next-preview h3 { color: #d35400; margin-bottom: 8px; }
        .next-preview p { color: #2c3e50; }
        .continue-btn {
            padding: 16px 40px; font-size: 1.1em;
            background: linear-gradient(135deg, #27ae60, #1e8449);
            border: none; border-radius: 12px; color: #fff;
            cursor: pointer; font-weight: bold; transition: all 0.3s ease; margin-top: 15px;
            box-shadow: 0 4px 15px rgba(39,174,96,0.3);
        }
        .continue-btn:hover { transform: scale(1.05); }

        /* Wrong Answers Review */
        .review-section {
            background: rgba(231,76,60,0.1); border: 2px solid rgba(231,76,60,0.3);
            border-radius: 15px; padding: 20px; margin: 20px 0; text-align: left;
        }
        .review-title { color: #c0392b; font-size: 1.2em; margin-bottom: 15px; text-align: center; }
        .review-item {
            background: rgba(255,255,255,0.7); border-radius: 10px;
            padding: 15px; margin-bottom: 12px; border-left: 4px solid #e74c3c;
        }
        .review-question { color: #2c3e50; font-size: 1em; margin-bottom: 8px; }
        .review-answer { color: #1e8449; font-size: 0.95em; }
        .review-answer span { color: #d35400; font-weight: bold; }
        .no-wrong { color: #1e8449; text-align: center; font-size: 1.1em; padding: 20px; }

        /* Effects */
        .extreme-glow { animation: extreme-pulse 1.5s infinite; }
        @keyframes extreme-pulse {
            0%, 100% { box-shadow: 0 0 20px rgba(155,89,182,0.5); }
            50% { box-shadow: 0 0 40px rgba(155,89,182,0.8); }
        }
        .hard-glow { animation: hard-pulse 2s infinite; }
        @keyframes hard-pulse {
            0%, 100% { box-shadow: 0 0 15px rgba(255,107,107,0.4); }
            50% { box-shadow: 0 0 30px rgba(255,107,107,0.7); }
        }
        .confetti { position: fixed; top: 0; left: 0; width: 100%; height: 100%; pointer-events: none; z-index: 1000; }
        .confetti-piece { position: absolute; width: 10px; height: 10px; animation: confetti-fall 3s ease-out forwards; }
        @keyframes confetti-fall {
            0% { transform: translateY(-100px) rotate(0deg); opacity: 1; }
            100% { transform: translateY(100vh) rotate(720deg); opacity: 0; }
        }

        @media (max-width: 600px) {
            .main-title { font-size: 1.8em; }
            .game-title { font-size: 1.8em; }
            .q-text { font-size: 1.05em; }
            .match-container { flex-direction: column; align-items: center; }
            .choices-grid { grid-template-columns: 1fr; }
            .world-card { width: 100%; }
            .worlds-container { flex-direction: column; align-items: center; }
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- World Select -->
        <div class="world-select" id="worldSelect">
            <div style="font-size:60px;margin-bottom:15px;">ğŸ›ï¸âš¡ğŸŒŠ</div>
            <h1 class="main-title">ğŸ›ï¸ Gods & Civilizations ğŸ›ï¸</h1>
            <p class="main-subtitle">Choose Your Adventure!</p>
            <div class="worlds-container">
                <div class="world-card w1" onclick="selectWorld(1)">
                    <div class="world-icon">âš¡ğŸ›ï¸</div>
                    <h2 class="world-title">WORLD 1</h2>
                    <h3 style="color:#2c3e50;margin-bottom:8px;">Gods & Myths</h3>
                    <p class="world-desc">Zeus, Poseidon, Athena, heroes & monsters!</p>
                    <span class="world-badge">ğŸ”„ ENDLESS</span>
                </div>
                <div class="world-card w2" onclick="selectWorld(2)">
                    <div class="world-icon">ğŸ“œâ³</div>
                    <h2 class="world-title">WORLD 2</h2>
                    <h3 style="color:#2c3e50;margin-bottom:8px;">Timeline & History</h3>
                    <p class="world-desc">Battles, empires, inventions & daily life!</p>
                    <span class="world-badge">ğŸ”„ ENDLESS</span>
                </div>
                <div class="world-card w3" onclick="selectWorld(3)">
                    <div class="world-icon">ğŸ¯ğŸ“</div>
                    <h2 class="world-title">WORLD 3</h2>
                    <h3 style="color:#2c3e50;margin-bottom:8px;">Review Test!</h3>
                    <p class="world-desc">Test yourself on W1 Gods & W2 History!</p>
                    <span class="world-badge">ğŸ”„ ENDLESS</span>
                </div>
            </div>
        </div>

        <!-- Start Screen -->
        <div class="start-screen" id="startScreen">
            <button class="back-btn" onclick="backToWorldSelect()">â† Back</button>
            <div class="game-icon" id="gameIcon">âš¡ğŸ›ï¸</div>
            <h1 class="game-title" id="gameTitle">Gods & Myths</h1>
            <p class="game-subtitle" id="gameSub">Journey to Ancient Greece & Rome!</p>
            <div class="endless-badge">ğŸ”„ ENDLESS MODE ğŸ”„</div>
            <p class="game-desc" id="gameDesc">Explore Mount Olympus!</p>
            <button class="start-btn" id="startBtn" onclick="startGame()">âš¡ START âš¡</button>
            <div class="level-preview">
                <span class="level-dot dot-cakewalk">ğŸ° Cakewalk</span>
                <span class="level-dot dot-easy">ğŸ˜Š Easy</span>
                <span class="level-dot dot-ok">ğŸ‘ OK</span>
                <span class="level-dot dot-hard">ğŸ”¥ Hard</span>
                <span class="level-dot dot-extreme">ğŸ’€ EXTREME</span>
            </div>
        </div>

        <!-- Game Screen -->
        <div class="game-screen" id="gameScreen">
            <div class="game-header">
                <div class="world-ind w1" id="worldInd">ğŸ›ï¸ World 1</div>
                <span class="level-ind" id="levelInd">ğŸ° CAKEWALK</span>
                <span class="score-disp">Score: <span id="scoreDisp">0</span></span>
                <div class="round-disp">Round <span id="roundDisp">1</span> â€¢ Q<span id="qNumDisp">1</span></div>
            </div>
            <div class="progress-bar">
                <div class="progress-fill" id="progressFill" style="width:0%"></div>
            </div>
            <div class="question-card" id="qCard"></div>
            <div class="feedback" id="feedback"></div>
            <div class="fun-fact" id="funFact">
                <div class="fun-fact-title">âœ¨ Fun Fact!</div>
                <div id="funFactText"></div>
            </div>
            <button class="next-btn" id="nextBtn" onclick="nextQuestion()">Next Question â†’</button>
            <div class="city-box">
                <div class="city-title" id="cityTitle">ğŸ™ï¸ Your Ancient City</div>
                <div class="city-items" id="cityItems"></div>
            </div>
        </div>

        <!-- Level Complete -->
        <div class="level-complete" id="levelComplete">
            <div style="font-size:60px;margin-bottom:10px;">ğŸ‰ğŸ†ğŸ‰</div>
            <h1 class="lc-title" id="lcTitle">ğŸ‰ Level Complete! ğŸ‰</h1>
            <p class="lc-score">You got <span id="lcScore">0</span> out of <span id="lcTotal">0</span> correct!</p>
            <div class="lc-badge" id="lcBadge">â­ Great Job!</div>
            <div class="stats-row">
                <div class="stat-box">
                    <div class="stat-num" id="totalScoreStat">0</div>
                    <div class="stat-label">Total Score</div>
                </div>
                <div class="stat-box">
                    <div class="stat-num" id="roundStat">1</div>
                    <div class="stat-label">Round</div>
                </div>
            </div>
            
            <!-- Wrong Answers Review -->
            <div class="review-section" id="reviewSection">
                <h3 class="review-title">ğŸ“š Let's Review What You Missed</h3>
                <div id="reviewContent"></div>
            </div>

            <div class="city-preview">
                <div class="city-title" style="color:#2c3e50;">Your City</div>
                <div class="city-preview-items" id="cityPreview"></div>
            </div>
            <div class="next-preview" id="nextPreview">
                <h3>Next Up:</h3>
                <p id="nextLevelName">ğŸ˜Š EASY</p>
            </div>
            <button class="continue-btn" onclick="continueToNextLevel()">Continue â†’</button>
        </div>
    </div>

    <script>
        // ============ WORLD 1: GODS & MYTHS ============
        const world1Data = {
            cakewalk: {
                name: "ğŸ° CAKEWALK", color: "#a8e6cf",
                questions: [
                    { type: "truefalse", question: "The Greek gods lived on Mount Olympus.", answer: true, funFact: "Mount Olympus is a real mountain in Greece!", image: "ğŸ”ï¸â›…ğŸ›ï¸" },
                    { type: "riddle", riddle: "I'm the king up in the sky,\nWith thunder clouds floating by.\nBolts of light are what I throw,\nWho am I? Do you know?", hint: "Boss of all gods!", answer: "ZEUS", acceptableAnswers: ["ZEUS", "Î–Î•Î¥Î£", "DIAS", "Î”Î™Î‘Î£"], funFact: "Zeus's symbol was the eagle! (Greek: Î–ÎµÏÏ‚ / Roman: Jupiter)", image: "âš¡ğŸ‘‘â˜ï¸" },
                    { type: "yesno", question: "Did ancient Greeks build temples?", answer: "yes", funFact: "Greek temples were painted in bright colors!", image: "ğŸ›ï¸ğŸ›ï¸ğŸ›ï¸" },
                    { type: "truefalse", question: "Poseidon was the god of the sky.", answer: false, correctInfo: "Poseidon was god of the sea!", funFact: "Poseidon could create islands with his trident! (Greek: Î Î¿ÏƒÎµÎ¹Î´ÏÎ½ / Roman: Neptune)", image: "ğŸŒŠğŸ”±ğŸš" },
                    { type: "riddle", riddle: "Deep below the waves I stay,\nWith dolphins and fish I play.\nA trident is my special stick,\nGuess my name, be quick!", hint: "Rules the ocean!", answer: "POSEIDON", acceptableAnswers: ["POSEIDON", "Î ÎŸÎ£Î•Î™Î”Î©Î", "Î ÎŸÎ£Î•Î™Î”Î©ÎÎ‘Î£", "NEPTUNE"], funFact: "Sailors prayed to Poseidon before voyages! (Greek: Î Î¿ÏƒÎµÎ¹Î´ÏÎ½ / Roman: Neptune)", image: "ğŸŒŠğŸ¬ğŸ”±" },
                    { type: "yesno", question: "Were the Olympics invented by Greeks?", answer: "yes", funFact: "Winners got olive wreaths, not gold medals!", image: "ğŸƒğŸ…ğŸŸï¸" },
                    { type: "matching", question: "Match the god to their power:", pairs: [{ left: "Zeus", right: "âš¡ Thunder" }, { left: "Poseidon", right: "ğŸŒŠ Ocean" }], funFact: "Zeus and Poseidon were brothers!", image: "âš¡ğŸ¤ğŸŒŠ" },
                    { type: "truefalse", question: "Greek gods could live forever.", answer: true, funFact: "Gods drank nectar to stay immortal!", image: "âœ¨ğŸ·â™¾ï¸" }
                ],
                rewards: ["ğŸ›ï¸", "ğŸŒ³", "â›²"]
            },
            easy: {
                name: "ğŸ˜Š EASY", color: "#88d8ff",
                questions: [
                    { type: "riddle", riddle: "An owl sits upon my arm,\nWisdom keeps the world from harm.\nI help heroes win their fights,\nWith clever plans and insights.", hint: "Goddess of wisdom!", answer: "ATHENA", acceptableAnswers: ["ATHENA", "Î‘Î˜Î—ÎÎ‘", "MINERVA"], funFact: "Athena was born from Zeus's head! (Greek: Î‘Î¸Î·Î½Î¬ / Roman: Minerva)", image: "ğŸ¦‰ğŸ‘©â€ğŸ¦°ğŸ›¡ï¸" },
                    { type: "truefalse", question: "Hermes had wings on his sandals.", answer: true, funFact: "Hermes could fly faster than any bird! (Greek: Î•ÏÎ¼Î®Ï‚ / Roman: Mercury)", image: "ğŸ‘ŸğŸª¶ğŸ’¨" },
                    { type: "yesno", question: "Did Apollo drive the sun across the sky?", answer: "yes", funFact: "Apollo's chariot had fire-breathing horses! (Greek: Î‘Ï€ÏŒÎ»Î»Ï‰Î½ / Roman: Apollo)", image: "â˜€ï¸ğŸ´ğŸ”¥" },
                    { type: "riddle", riddle: "I run and fly without a rest,\nAt being fast I am the best.\nMessages I bring all day,\nWith winged sandals on my way!", hint: "Messenger god!", answer: "HERMES", acceptableAnswers: ["HERMES", "Î•Î¡ÎœÎ—Î£", "MERCURY"], funFact: "Hermes guided souls to the underworld! (Greek: Î•ÏÎ¼Î®Ï‚ / Roman: Mercury)", image: "ğŸ’¨ğŸ“¨ğŸª¶" },
                    { type: "multiplechoice", question: "What animal was sacred to Athena?", choices: ["Lion", "Owl", "Eagle", "Snake"], answer: "Owl", funFact: "Owls represented wisdom!", image: "ğŸ¦ğŸ¦‰ğŸ¦…ğŸ" },
                    { type: "truefalse", question: "Artemis was goddess of the hunt.", answer: true, funFact: "Artemis never missed with her bow! (Greek: Î†ÏÏ„ÎµÎ¼Î¹Ï‚ / Roman: Diana)", image: "ğŸ¹ğŸŒ™ğŸ¦Œ" },
                    { type: "matching", question: "Match god to symbol:", pairs: [{ left: "Athena", right: "ğŸ¦‰ Owl" }, { left: "Apollo", right: "â˜€ï¸ Sun" }, { left: "Artemis", right: "ğŸ¹ Bow" }], funFact: "Artemis and Apollo were twins!", image: "ğŸ¦‰â˜€ï¸ğŸ¹" },
                    { type: "yesno", question: "Did Hades live on Mount Olympus?", answer: "no", funFact: "Hades lived in the Underworld! (Greek: Î†Î´Î·Ï‚ / Roman: Pluto)", image: "ğŸ’€ğŸ”¥ğŸ‘‘" }
                ],
                rewards: ["ğŸ›ï¸", "ğŸ—¿", "ğŸŒº", "ğŸº"]
            },
            ok: {
                name: "ğŸ‘ OK", color: "#ffd93d",
                questions: [
                    { type: "riddle", riddle: "I'm the strongest man around,\nDoing tasks across the ground.\nTwelve hard labors were my test,\nI'm a hero, one of the best!", hint: "Did 12 impossible tasks!", answer: "HERCULES", acceptableAnswers: ["HERCULES", "HERACLES", "Î—Î¡Î‘ÎšÎ›Î—Î£", "HERAKLES"], funFact: "Hercules could wrestle lions! (Greek: Î—ÏÎ±ÎºÎ»Î®Ï‚ / Roman: Hercules)", image: "ğŸ’ªğŸ¦âš”ï¸" },
                    { type: "truefalse", question: "Romans called Zeus 'Jupiter'.", answer: true, funFact: "The planet Jupiter is named after him! (Greek: Î–ÎµÏÏ‚ / Roman: Jupiter)", image: "âš¡ğŸªğŸ‡®ğŸ‡¹" },
                    { type: "yesno", question: "Did Cerberus have three heads?", answer: "yes", funFact: "Cerberus guarded the Underworld! (Greek: ÎšÎ­ÏÎ²ÎµÏÎ¿Ï‚)", image: "ğŸ•ğŸ•ğŸ•" },
                    { type: "riddle", riddle: "Three heads I have, teeth so sharp,\nI guard a place that's very dark.\nNo one escapes my watchful eyes,\nI'm Hades' pet of massive size!", hint: "Three-headed guard dog!", answer: "CERBERUS", acceptableAnswers: ["CERBERUS", "ÎšÎ•Î¡Î’Î•Î¡ÎŸÎ£", "KERBEROS"], funFact: "Orpheus put Cerberus to sleep with music! (Greek: ÎšÎ­ÏÎ²ÎµÏÎ¿Ï‚)", image: "ğŸ¶ğŸ¶ğŸ¶ğŸ”¥" },
                    { type: "multiplechoice", question: "Neptune is Roman god of what?", choices: ["War", "The Sea", "Fire", "Love"], answer: "The Sea", funFact: "Neptune = Greek Poseidon! (Greek: Î Î¿ÏƒÎµÎ¹Î´ÏÎ½ / Roman: Neptune)", image: "ğŸ”±ğŸŒŠğŸš" },
                    { type: "matching", question: "Match Greek to Roman names:", pairs: [{ left: "Zeus", right: "Jupiter" }, { left: "Ares", right: "Mars" }, { left: "Aphrodite", right: "Venus" }], funFact: "Romans borrowed Greek gods!", image: "ğŸ‡¬ğŸ‡·â¡ï¸ğŸ‡®ğŸ‡¹" },
                    { type: "truefalse", question: "Hephaestus made weapons for gods.", answer: true, funFact: "Hephaestus made Zeus's lightning bolts! (Greek: Î‰Ï†Î±Î¹ÏƒÏ„Î¿Ï‚ / Roman: Vulcan)", image: "ğŸ”¨ğŸ”¥âš”ï¸" },
                    { type: "riddle", riddle: "I am goddess of love so sweet,\nWith beauty none can beat.\nFrom sea foam I was born,\nRomans call me Venus morn!", hint: "Goddess of love!", answer: "APHRODITE", acceptableAnswers: ["APHRODITE", "Î‘Î¦Î¡ÎŸÎ”Î™Î¤Î—", "VENUS"], funFact: "Venus the planet is named after her! (Greek: Î‘Ï†ÏÎ¿Î´Î¯Ï„Î· / Roman: Venus)", image: "ğŸ’•ğŸŒ¹ğŸ‘¸" }
                ],
                rewards: ["ğŸ›ï¸", "â›²", "ğŸ—¿", "ğŸº", "ğŸ‘‘"]
            },
            hard: {
                name: "ğŸ”¥ HARD", color: "#ff6b6b",
                questions: [
                    { type: "riddle", riddle: "I sailed for years through stormy seas,\nFighting monsters, if you please.\nA Cyclops tried to eat my crew,\nThe Trojan Horse? My idea too!", hint: "10 years to get home!", answer: "ODYSSEUS", acceptableAnswers: ["ODYSSEUS", "ÎŸÎ”Î¥Î£Î£Î•Î‘Î£", "ULYSSES", "ÎŸÎ”Î¥Î£Î£Î•Î¥Î£"], funFact: "His journey is told in Homer's Odyssey! (Greek: ÎŸÎ´Ï…ÏƒÏƒÎ­Î±Ï‚ / Roman: Ulysses)", image: "â›µğŸŒŠğŸ‘ï¸" },
                    { type: "multiplechoice", question: "What happened when you cut a Hydra head?", choices: ["It died", "Two more grew", "It grew wings", "Nothing"], answer: "Two more grew", funFact: "Hercules burned necks to stop new heads! (Greek: ÎÎ´ÏÎ±)", image: "ğŸğŸğŸğŸ”¥" },
                    { type: "riddle", riddle: "I was cursed to never be believed,\nThough every prophecy I perceived.\nTroy would fall, I tried to warn,\nBut everyone just laughed in scorn.", hint: "Could see future, no one believed!", answer: "CASSANDRA", acceptableAnswers: ["CASSANDRA", "ÎšÎ‘Î£Î£Î‘ÎÎ”Î¡Î‘"], funFact: "Apollo cursed her for rejecting him! (Greek: ÎšÎ±ÏƒÏƒÎ¬Î½Î´ÏÎ±)", image: "ğŸ”®ğŸ‘©ğŸ˜¢" },
                    { type: "truefalse", question: "Cyclops Polyphemus was Poseidon's son.", answer: true, funFact: "Poseidon cursed Odysseus for blinding him! (Greek: Î Î¿Î»ÏÏ†Î·Î¼Î¿Ï‚)", image: "ğŸ‘ï¸ğŸ”±ğŸ˜¡" },
                    { type: "matching", question: "Match hero to weakness:", pairs: [{ left: "Achilles", right: "His heel" }, { left: "Orpheus", right: "Looking back" }, { left: "Icarus", right: "Flying too high" }], funFact: "Greek heroes had fatal flaws! (Î‘Ï‡Î¹Î»Î»Î­Î±Ï‚, ÎŸÏÏ†Î­Î±Ï‚, ÎŠÎºÎ±ÏÎ¿Ï‚)", image: "ğŸ¦¶ğŸ‘€ğŸª¶" },
                    { type: "riddle", riddle: "Born from blood of slain Medusa,\nA horse with wings, quite the sight!\nI carried heroes through the sky,\nA constellation now on high.", hint: "Flying horse!", answer: "PEGASUS", acceptableAnswers: ["PEGASUS", "Î Î—Î“Î‘Î£ÎŸÎ£"], funFact: "Pegasus was born from Medusa's blood! (Greek: Î Î®Î³Î±ÏƒÎ¿Ï‚)", image: "ğŸ´ğŸª¶âœ¨" },
                    { type: "multiplechoice", question: "What did Orpheus do wrong saving Eurydice?", choices: ["Wrong password", "Looked back", "Wrong song", "Too slow"], answer: "Looked back", funFact: "He was just steps from freedom! (Greek: ÎŸÏÏ†Î­Î±Ï‚ & Î•Ï…ÏÏ…Î´Î¯ÎºÎ·)", image: "ğŸµğŸ‘€ğŸ’”" },
                    { type: "riddle", riddle: "I challenged Athena to weave,\nA contest I thought I'd achieve.\nTurned into something small,\nNow I weave webs on the wall.", hint: "Became a spider!", answer: "ARACHNE", acceptableAnswers: ["ARACHNE", "Î‘Î¡Î‘Î§ÎÎ—"], funFact: "That's why spiders are 'arachnids'! (Greek: Î‘ÏÎ¬Ï‡Î½Î·)", image: "ğŸ•·ï¸ğŸ•¸ï¸ğŸ‘©" }
                ],
                rewards: ["âš”ï¸", "ğŸ›¡ï¸", "ğŸ‘‘", "ğŸ›ï¸", "ğŸ’"]
            },
            extreme: {
                name: "ğŸ’€ EXTREME", color: "#9b59b6",
                questions: [
                    { type: "riddle", riddle: "I stole fire from gods above,\nGave it to humans out of love.\nChained to rock for my crime,\nEagle ate my liver for all time.", hint: "Punished forever for helping humans!", answer: "PROMETHEUS", acceptableAnswers: ["PROMETHEUS", "Î Î¡ÎŸÎœÎ—Î˜Î•Î‘Î£", "Î Î¡ÎŸÎœÎ—Î˜Î•Î¥Î£"], funFact: "His liver grew back each night! (Greek: Î ÏÎ¿Î¼Î·Î¸Î­Î±Ï‚)", image: "ğŸ”¥â›“ï¸ğŸ¦…" },
                    { type: "multiplechoice", question: "Which primordial deity existed FIRST?", choices: ["Zeus", "Gaia", "Chaos", "Uranus"], answer: "Chaos", funFact: "Chaos was the void before everything! (Greek: Î§Î¬Î¿Ï‚)", image: "ğŸŒ‘â“ğŸŒŒ" },
                    { type: "riddle", riddle: "I ferry souls across river wide,\nFor a coin on lips of those who died.\nRiver Styx was my domain,\nNo coin, no passageâ€”that's plain.", hint: "Ferryman of the dead!", answer: "CHARON", acceptableAnswers: ["CHARON", "Î§Î‘Î¡Î©Î", "Î§Î‘Î¡ÎŸÎÎ¤Î‘Î£", "CHAROS"], funFact: "Greeks buried dead with coins for Charon! (Greek: Î§Î¬ÏÏ‰Î½)", image: "â›µğŸ’€ğŸª™" },
                    { type: "truefalse", question: "Tantalus was punished with food and water just out of reach.", answer: true, funFact: "That's where 'tantalize' comes from! (Greek: Î¤Î¬Î½Ï„Î±Î»Î¿Ï‚)", image: "ğŸğŸ’§ğŸ˜«" },
                    { type: "matching", question: "Match monster to power:", pairs: [{ left: "Sirens", right: "Deadly songs" }, { left: "Scylla", right: "Six heads" }, { left: "Charybdis", right: "Whirlpool" }], funFact: "Odysseus sailed between Scylla and Charybdis! (Î£ÎµÎ¹ÏÎ®Î½ÎµÏ‚, Î£ÎºÏÎ»Î»Î±, Î§Î¬ÏÏ…Î²Î´Î¹Ï‚)", image: "ğŸµğŸ‘¹ğŸŒ€" },
                    { type: "multiplechoice", question: "What stayed INSIDE Pandora's Box?", choices: ["Love", "Only Hope", "Death", "Spirits"], answer: "Only Hope", funFact: "Hope remained so humans could survive! (Greek: Î Î±Î½Î´ÏÏÎ±)", image: "ğŸ“¦âœ¨ğŸ™" },
                    { type: "riddle", riddle: "Morning four, noon just two,\nEvening three will do.\nAnswer wrong, be my feast,\nPart woman, part lion beast.", hint: "Asked deadly riddles!", answer: "SPHINX", acceptableAnswers: ["SPHINX", "THE SPHINX", "Î£Î¦Î™Î“Î“Î‘", "Î£Î¦Î™Î“Î"], funFact: "Answer is 'man' - crawls, walks, uses cane! (Greek: Î£Ï†Î¯Î³Î³Î±)", image: "ğŸ¦ğŸ‘©â“" },
                    { type: "truefalse", question: "Cronus ate his children but Zeus escaped via a rock in blankets.", answer: true, funFact: "Zeus made Cronus vomit up his siblings! (Greek: ÎšÏÏŒÎ½Î¿Ï‚)", image: "ğŸ‘¶ğŸª¨ğŸ˜±" }
                ],
                rewards: ["ğŸ‘‘", "âš”ï¸", "ğŸ›¡ï¸", "ğŸ’", "ğŸŒŸ", "ğŸ”±", "ğŸ’€"]
            }
        };

        // ============ WORLD 2: TIMELINE & HISTORY ============
        const world2Data = {
            cakewalk: {
                name: "ğŸ° CAKEWALK", color: "#a8e6cf",
                questions: [
                    { type: "truefalse", question: "Ancient Greece existed before Ancient Rome.", answer: true, funFact: "Greece started ~800 BC, Rome ~753 BC!", image: "ğŸ‡¬ğŸ‡·â°ğŸ‡®ğŸ‡¹" },
                    { type: "riddle", riddle: "I'm a city on seven hills,\nWith soldiers, roads, building skills.\nI conquered lands both far and wide,\nAn empire known for strength and pride!", hint: "Famous ancient empire!", answer: "ROME", acceptableAnswers: ["ROME", "ROMA", "Î¡Î©ÎœÎ—"], funFact: "Rome was called the 'Eternal City'! (Latin: Roma / Greek: Î¡ÏÎ¼Î·)", image: "ğŸ›ï¸â›°ï¸ğŸ¦…" },
                    { type: "yesno", question: "Did ancient Greeks invent democracy?", answer: "yes", funFact: "Democracy means 'rule by the people'! (Greek: Î”Î·Î¼Î¿ÎºÏÎ±Ï„Î¯Î±)", image: "ğŸ—³ï¸ğŸ‘¥âœ‹" },
                    { type: "truefalse", question: "The pyramids were built by Romans.", answer: false, correctInfo: "Pyramids were built by Egyptians!", funFact: "Pyramids were 2,000 years old when Rome was founded!", image: "ğŸ”ºğŸœï¸ğŸ‡ªğŸ‡¬" },
                    { type: "riddle", riddle: "A contest held every four years,\nWith running, throwing, athletes' cheers.\nStarted in Greece long ago,\nNow the whole world puts on a show!", hint: "Famous sports event!", answer: "OLYMPICS", acceptableAnswers: ["OLYMPICS", "THE OLYMPICS", "OLYMPIC GAMES", "ÎŸÎ›Î¥ÎœÎ Î™Î‘ÎšÎŸÎ™", "OLYMPIA", "ÎŸÎ›Î¥ÎœÎ Î™Î‘"], funFact: "First Olympics were in 776 BC! (Greek: ÎŸÎ»Ï…Î¼Ï€Î¹Î±ÎºÎ¿Î¯ Î‘Î³ÏÎ½ÎµÏ‚)", image: "ğŸƒğŸ…ğŸŸï¸" },
                    { type: "yesno", question: "Did Romans build long, straight roads?", answer: "yes", funFact: "Some Roman roads still exist today!", image: "ğŸ›¤ï¸ğŸš¶â¡ï¸" },
                    { type: "matching", question: "Match invention to civilization:", pairs: [{ left: "Democracy", right: "Greeks" }, { left: "Aqueducts", right: "Romans" }], funFact: "Romans brought water into cities!", image: "ğŸ—³ï¸ğŸ’§ğŸ›ï¸" },
                    { type: "truefalse", question: "Ancient Greeks wrote plays.", answer: true, funFact: "Greek theaters held 15,000 people!", image: "ğŸ­ğŸªğŸ‘" }
                ],
                rewards: ["ğŸ“œ", "ğŸ›ï¸", "â³"]
            },
            easy: {
                name: "ğŸ˜Š EASY", color: "#88d8ff",
                questions: [
                    { type: "riddle", riddle: "A soldier trained from young age,\nIn a Greek city known for rage.\nWe never surrender, never flee,\nCome back with shield or on it!", hint: "Famous Greek warriors!", answer: "SPARTAN", acceptableAnswers: ["SPARTAN", "SPARTANS", "SPARTA", "Î£Î Î‘Î¡Î¤Î—", "Î£Î Î‘Î¡Î¤Î™Î‘Î¤Î—Î£", "Î£Î Î‘Î¡Î¤Î™Î‘Î¤Î•Î£"], funFact: "Spartan training started at age 7! (Greek: Î£Ï€Î¬ÏÏ„Î· / Î£Ï€Î±ÏÏ„Î¹Î¬Ï„ÎµÏ‚)", image: "ğŸ›¡ï¸âš”ï¸ğŸ’ª" },
                    { type: "truefalse", question: "Gladiators fought in the Colosseum.", answer: true, funFact: "Colosseum held 50,000 spectators! (Latin: Colosseum)", image: "ğŸŸï¸âš”ï¸ğŸ‘Š" },
                    { type: "yesno", question: "Did Greeks use an alphabet?", answer: "yes", funFact: "'Alphabet' comes from alpha and beta! (Greek: Î†Î»Ï†Î±, Î’Î®Ï„Î±)", image: "ğŸ”¤ğŸ“âœï¸" },
                    { type: "riddle", riddle: "I'm a place where learning grew,\nPhilosophers taught what was true.\nSocrates and Plato here,\nIn ancient Greece, ideas clear!", hint: "Place of learning!", answer: "ATHENS", acceptableAnswers: ["ATHENS", "ACADEMY", "Î‘Î˜Î—ÎÎ‘", "ATHINA"], funFact: "Athens was center of philosophy! (Greek: Î‘Î¸Î®Î½Î±)", image: "ğŸ›ï¸ğŸ“šğŸ¤”" },
                    { type: "multiplechoice", question: "What did Romans bathe in?", choices: ["Rivers only", "Public bath houses", "Never bathed", "Private pools"], answer: "Public bath houses", funFact: "Roman baths had hot, warm, cold pools! (Latin: Thermae)", image: "ğŸ›ğŸ’¦ğŸ›ï¸" },
                    { type: "truefalse", question: "Greek children played with toys.", answer: true, funFact: "Greek kids had dolls, balls, yo-yos!", image: "ğŸª€ğŸ¾ğŸª†" },
                    { type: "matching", question: "Match city to fame:", pairs: [{ left: "Athens", right: "Philosophy" }, { left: "Sparta", right: "Warriors" }, { left: "Rome", right: "Empire" }], funFact: "Athens and Sparta were rivals! (Î‘Î¸Î®Î½Î± vs Î£Ï€Î¬ÏÏ„Î·)", image: "ğŸ›ï¸âš”ï¸ğŸ¦…" },
                    { type: "yesno", question: "Did Romans have concrete?", answer: "yes", funFact: "Roman concrete is stronger than modern!", image: "ğŸ§±ğŸ—ï¸ğŸ’ª" }
                ],
                rewards: ["ğŸ“œ", "ğŸ—¿", "âš”ï¸", "ğŸº"]
            },
            ok: {
                name: "ğŸ‘ OK", color: "#ffd93d",
                questions: [
                    { type: "riddle", riddle: "I conquered from Greece to India,\nAt thirty-two I was no more.\nThey called me 'Great' through the land,\nMy empire vast and grand!", hint: "Famous young conqueror!", answer: "ALEXANDER", acceptableAnswers: ["ALEXANDER", "ALEXANDER THE GREAT", "Î‘Î›Î•ÎÎ‘ÎÎ”Î¡ÎŸÎ£", "ALEXANDROS", "MEGAS ALEXANDROS"], funFact: "Alexander never lost a battle! (Greek: Î‘Î»Î­Î¾Î±Î½Î´ÏÎ¿Ï‚ Î¿ ÎœÎ­Î³Î±Ï‚)", image: "ğŸ‘‘ğŸ—¡ï¸ğŸŒ" },
                    { type: "truefalse", question: "Julius Caesar was a Roman emperor.", answer: false, correctInfo: "Caesar was dictator. Augustus was first emperor!", funFact: "July is named after Julius Caesar! (Latin: Iulius Caesar / Greek: Î™Î¿ÏÎ»Î¹Î¿Ï‚ ÎšÎ±Î¯ÏƒÎ±Ï)", image: "ğŸ›ï¸ğŸ‘¤âŒ" },
                    { type: "yesno", question: "Did Greeks have coins?", answer: "yes", funFact: "Greek coins showed owls or gods!", image: "ğŸª™ğŸ¦‰ğŸ’°" },
                    { type: "riddle", riddle: "Three hundred warriors held the pass,\nAgainst a Persian army vast.\nWe fought and died, earned great fame,\nThermopylae was our name!", hint: "Famous Spartan last stand!", answer: "SPARTANS", acceptableAnswers: ["SPARTANS", "300 SPARTANS", "THREE HUNDRED", "Î£Î Î‘Î¡Î¤Î™Î‘Î¤Î•Î£", "300"], funFact: "King Leonidas led the 300! (Greek: Î›ÎµÏ‰Î½Î¯Î´Î±Ï‚ & 300 Î£Ï€Î±ÏÏ„Î¹Î¬Ï„ÎµÏ‚)", image: "ğŸ›¡ï¸âš”ï¸ğŸ”¥" },
                    { type: "multiplechoice", question: "What was a Roman legion?", choices: ["Food", "Soldiers", "Temple", "Ship"], answer: "Soldiers", funFact: "A legion had about 5,000 soldiers! (Latin: Legio)", image: "ğŸª–ğŸ›¡ï¸âš”ï¸" },
                    { type: "matching", question: "Match event to date:", pairs: [{ left: "First Olympics", right: "776 BC" }, { left: "Rome founded", right: "753 BC" }, { left: "Rome fell", right: "476 AD" }], funFact: "Roman Empire lasted 1,000+ years!", image: "ğŸ“…ğŸ›ï¸â³" },
                    { type: "truefalse", question: "Cleopatra was last pharaoh of Egypt.", answer: true, funFact: "Cleopatra lived closer to us than to pyramid builders! (Greek: ÎšÎ»ÎµÎ¿Ï€Î¬Ï„ÏÎ±)", image: "ğŸ‘¸ğŸ‡ªğŸ‡¬ğŸ" },
                    { type: "riddle", riddle: "Beware the Ides of March, said they,\nBut I ignored and paid the way.\nStabbed by friends in hall,\n'Et tu?' I cried as I did fall!", hint: "Famous Roman leader!", answer: "CAESAR", acceptableAnswers: ["CAESAR", "JULIUS CAESAR", "ÎšÎ‘Î™Î£Î‘Î¡Î‘Î£", "IULIUS"], funFact: "Caesar was stabbed 23 times! (Latin: Gaius Iulius Caesar / Greek: ÎšÎ±Î¯ÏƒÎ±ÏÎ±Ï‚)", image: "ğŸ—¡ï¸ğŸ“…ğŸ˜µ" }
                ],
                rewards: ["ğŸ“œ", "â›²", "ğŸ—¿", "âš”ï¸", "ğŸ‘‘"]
            },
            hard: {
                name: "ğŸ”¥ HARD", color: "#ff6b6b",
                questions: [
                    { type: "riddle", riddle: "I crossed the Alps with elephants tall,\nTo make the mighty Romans fall.\nFrom Carthage came my deadly force,\nI won each battle on my course!", hint: "Almost conquered Rome!", answer: "HANNIBAL", acceptableAnswers: ["HANNIBAL", "Î‘ÎÎÎ™Î’Î‘Î£", "HANNIBAL BARCA"], funFact: "Hannibal crossed Alps with 37 elephants! (Greek: Î‘Î½Î½Î¯Î²Î±Ï‚)", image: "ğŸ˜ğŸ”ï¸âš”ï¸" },
                    { type: "multiplechoice", question: "How long was the Peloponnesian War?", choices: ["5 years", "10 years", "27 years", "50 years"], answer: "27 years", funFact: "The war weakened all of Greece! (Greek: Î ÎµÎ»Î¿Ï€Î¿Î½Î½Î·ÏƒÎ¹Î±ÎºÏŒÏ‚ Î ÏŒÎ»ÎµÎ¼Î¿Ï‚)", image: "âš”ï¸ğŸ“…ğŸ˜¢" },
                    { type: "riddle", riddle: "I wrote about the Trojan War,\nBlind poet, tales of ancient lore.\nIliad and Odyssey,\nAre epic poems by me!", hint: "Famous Greek poet!", answer: "HOMER", acceptableAnswers: ["HOMER", "ÎŸÎœÎ—Î¡ÎŸÎ£", "HOMEROS"], funFact: "We don't know if Homer was one person! (Greek: ÎŒÎ¼Î·ÏÎ¿Ï‚)", image: "ğŸ“œğŸ‘´ğŸ­" },
                    { type: "truefalse", question: "Library of Alexandria was largest in ancient world.", answer: true, funFact: "It may have held 400,000 scrolls! (Greek: Î’Î¹Î²Î»Î¹Î¿Î¸Î®ÎºÎ· Ï„Î·Ï‚ Î‘Î»ÎµÎ¾Î¬Î½Î´ÏÎµÎ¹Î±Ï‚)", image: "ğŸ“šğŸ›ï¸ğŸ”¥" },
                    { type: "matching", question: "Match philosopher to idea:", pairs: [{ left: "Socrates", right: "Question everything" }, { left: "Plato", right: "World of forms" }, { left: "Aristotle", right: "Logic & science" }], funFact: "Each was teacher of the next! (Î£Ï‰ÎºÏÎ¬Ï„Î·Ï‚, Î Î»Î¬Ï„Ï‰Î½, Î‘ÏÎ¹ÏƒÏ„Î¿Ï„Î­Î»Î·Ï‚)", image: "ğŸ¤”ğŸ’­ğŸ“š" },
                    { type: "riddle", riddle: "I ran 26 miles with the news,\n'We won!' I cried, then paid my dues.\nFrom Marathon I ran so far,\nNow races bear my star!", hint: "Origin of marathon!", answer: "PHEIDIPPIDES", acceptableAnswers: ["PHEIDIPPIDES", "Î¦Î•Î™Î”Î™Î Î Î™Î”Î—Î£", "MARATHON", "ÎœÎ‘Î¡Î‘Î˜Î©Î", "PHILIPPIDES"], funFact: "Marathons are 26.2 miles because of this! (Greek: Î¦ÎµÎ¹Î´Î¹Ï€Ï€Î¯Î´Î·Ï‚)", image: "ğŸƒğŸ’¨ğŸ“£" },
                    { type: "multiplechoice", question: "What did Archimedes discover in bathtub?", choices: ["Gravity", "Water displacement", "Electricity", "Magnetism"], answer: "Water displacement", funFact: "He shouted 'Eureka!' - 'I found it!' (Greek: Î•ÏÏÎ·ÎºÎ±!)", image: "ğŸ›ğŸ’¡ğŸ˜²" },
                    { type: "riddle", riddle: "A mountain that one day blew,\nBuried Pompeii and people too.\nIn 79 AD I woke,\nFrozen in ash, no joke!", hint: "Famous volcanic eruption!", answer: "VESUVIUS", acceptableAnswers: ["VESUVIUS", "MOUNT VESUVIUS", "Î’Î•Î–ÎŸÎ¥Î’Î™ÎŸÎ£", "VESUVIO"], funFact: "Pompeii preserved Roman daily life! (Latin: Vesuvius / Greek: Î’ÎµÎ¶Î¿ÏÎ²Î¹Î¿Ï‚)", image: "ğŸŒ‹ğŸ”¥ğŸ›ï¸" }
                ],
                rewards: ["âš”ï¸", "ğŸ›¡ï¸", "ğŸ‘‘", "ğŸ“œ", "ğŸ’"]
            },
            extreme: {
                name: "ğŸ’€ EXTREME", color: "#9b59b6",
                questions: [
                    { type: "riddle", riddle: "Strangled by my own mom's plot,\nEmperor at sixteen, quite a lot!\nBlamed Christians for Rome's fire,\nMy cruelty made my name inspire!", hint: "Cruel Roman emperor!", answer: "NERO", acceptableAnswers: ["NERO", "ÎÎ•Î¡Î©Î", "NERON"], funFact: "Legend says Nero played music while Rome burned! (Latin: Nero / Greek: ÎÎ­ÏÏ‰Î½)", image: "ğŸ”¥ğŸ»ğŸ‘‘" },
                    { type: "multiplechoice", question: "What was the Pax Romana?", choices: ["Roman bread", "200 years of peace", "A god", "Army formation"], answer: "200 years of peace", funFact: "Pax Romana lasted 27 BC to 180 AD! (Latin: Roman Peace)", image: "â˜®ï¸ğŸ›ï¸ğŸ•Šï¸" },
                    { type: "riddle", riddle: "I calculated pi, moved the world,\nWith levers my genius unfurled.\n'Give me lever long enough,' I said,\n'I'll move the Earth!' from my head!", hint: "Brilliant mathematician!", answer: "ARCHIMEDES", acceptableAnswers: ["ARCHIMEDES", "Î‘Î¡Î§Î™ÎœÎ—Î”Î—Î£"], funFact: "Archimedes invented war machines! (Greek: Î‘ÏÏ‡Î¹Î¼Î®Î´Î·Ï‚)", image: "ğŸ“ğŸŒğŸ’¡" },
                    { type: "truefalse", question: "Twelve Tables were Rome's first written laws.", answer: true, funFact: "They were carved on bronze in 450 BC! (Latin: Leges Duodecim Tabularum)", image: "ğŸ“œâš–ï¸ğŸ›ï¸" },
                    { type: "matching", question: "Match battle to result:", pairs: [{ left: "Marathon", right: "Greeks beat Persia" }, { left: "Thermopylae", right: "300 Spartans" }, { left: "Actium", right: "Octavian wins" }], funFact: "Battle of Actium made Octavian emperor! (ÎœÎ±ÏÎ±Î¸ÏÎ½, Î˜ÎµÏÎ¼Î¿Ï€ÏÎ»ÎµÏ‚, Î†ÎºÏ„Î¹Î¿)", image: "âš”ï¸ğŸ›¡ï¸ğŸ†" },
                    { type: "riddle", riddle: "I crossed the Rubicon one day,\n'The die is cast!' I heard me say.\nThis act of war changed fate,\nRepublic died, Empire great!", hint: "Started civil war!", answer: "CAESAR", acceptableAnswers: ["CAESAR", "JULIUS CAESAR", "ÎšÎ‘Î™Î£Î‘Î¡Î‘Î£", "IULIUS CAESAR"], funFact: "Crossing Rubicon meant no going back! (Latin: Alea iacta est / Greek: ÎšÎ±Î¯ÏƒÎ±ÏÎ±Ï‚)", image: "ğŸ²ğŸŒŠâš”ï¸" },
                    { type: "multiplechoice", question: "What was Greek Fire?", choices: ["Cooking method", "Weapon burning on water", "Ceremony", "Pottery"], answer: "Weapon burning on water", funFact: "Greek Fire formula is lost to history! (Greek: Î¥Î³ÏÏŒ Î Ï…Ï)", image: "ğŸ”¥ğŸŒŠğŸ’¥" },
                    { type: "truefalse", question: "Romans had central heating called hypocausts.", answer: true, funFact: "Hot air flowed under floors and walls! (Latin: Hypocaustum)", image: "ğŸ”¥ğŸ â™¨ï¸" }
                ],
                rewards: ["ğŸ‘‘", "âš”ï¸", "ğŸ›¡ï¸", "ğŸ’", "ğŸŒŸ", "ğŸ“œ", "ğŸ’€"]
            }
        };

        // ============ WORLD 3: REVIEW WORLD ============
        // Tests knowledge from World 1 (Gods) and World 2 (History)
        
        const world3Data = {
            w1review: {
                name: "âš¡ W1: Gods Review", 
                color: "#ffd700",
                questions: [
                    { type: "multiplechoice", question: "Who was king of all the Greek gods?", choices: ["Poseidon", "Hades", "Zeus", "Apollo"], answer: "Zeus", funFact: "Zeus ruled from Mount Olympus! (Greek: Î–ÎµÏÏ‚ / Roman: Jupiter)", image: "âš¡ğŸ‘‘ğŸ›ï¸" },
                    { type: "riddle", riddle: "I have three heads and guard the dead,\nIn the Underworld I make my bed.\nNo soul escapes my watchful eyes,\nI'm Hades' pet of fearsome size!", hint: "Three-headed dog!", answer: "CERBERUS", acceptableAnswers: ["CERBERUS", "ÎšÎ•Î¡Î’Î•Î¡ÎŸÎ£", "KERBEROS"], funFact: "Cerberus means 'spotted' in Greek! (Greek: ÎšÎ­ÏÎ²ÎµÏÎ¿Ï‚)", image: "ğŸ¶ğŸ¶ğŸ¶ğŸ”¥" },
                    { type: "matching", question: "Match Greek gods to Roman names:", pairs: [{ left: "Zeus", right: "Jupiter" }, { left: "Poseidon", right: "Neptune" }, { left: "Ares", right: "Mars" }, { left: "Athena", right: "Minerva" }], funFact: "Romans adopted Greek gods but gave them new names!", image: "ğŸ‡¬ğŸ‡·â¡ï¸ğŸ‡®ğŸ‡¹" },
                    { type: "truefalse", question: "Athena was the goddess of wisdom and war.", answer: true, funFact: "Athena's symbol was the owl! (Greek: Î‘Î¸Î·Î½Î¬ / Roman: Minerva)", image: "ğŸ¦‰ğŸ›¡ï¸ğŸ‘©" },
                    { type: "multiplechoice", question: "What weapon did Poseidon carry?", choices: ["Lightning bolt", "Sword", "Trident", "Bow"], answer: "Trident", funFact: "Poseidon could cause earthquakes with his trident! (Greek: Î Î¿ÏƒÎµÎ¹Î´ÏÎ½ / Roman: Neptune)", image: "ğŸ”±ğŸŒŠğŸš" },
                    { type: "riddle", riddle: "Twelve labors I had to do,\nFighting monsters through and through.\nThe strongest hero, that is me,\nSon of Zeus for all to see!", hint: "Strongest Greek hero!", answer: "HERCULES", acceptableAnswers: ["HERCULES", "HERACLES", "Î—Î¡Î‘ÎšÎ›Î—Î£", "HERAKLES"], funFact: "Hercules became a god after completing his labors! (Greek: Î—ÏÎ±ÎºÎ»Î®Ï‚ / Roman: Hercules)", image: "ğŸ’ªğŸ¦âš”ï¸" },
                    { type: "yesno", question: "Did Hermes have wings on his sandals?", answer: "yes", funFact: "Hermes was the fastest of all the gods! (Greek: Î•ÏÎ¼Î®Ï‚ / Roman: Mercury)", image: "ğŸ‘ŸğŸª¶ğŸ’¨" },
                    { type: "multiplechoice", question: "Who flew too close to the sun?", choices: ["Perseus", "Theseus", "Icarus", "Orpheus"], answer: "Icarus", funFact: "The wax holding Icarus's wings melted! (Greek: ÎŠÎºÎ±ÏÎ¿Ï‚)", image: "â˜€ï¸ğŸª¶ğŸ˜±" },
                    { type: "truefalse", question: "Medusa could turn people to stone by looking at them.", answer: true, funFact: "Perseus used a mirror shield to defeat her! (Greek: ÎœÎ­Î´Î¿Ï…ÏƒÎ±)", image: "ğŸğŸ‘€ğŸª¨" },
                    { type: "riddle", riddle: "I stole fire for humankind,\nChained to a rock, my fate unkind.\nAn eagle ate my liver each day,\nBut it grew back, to my dismay!", hint: "Punished forever!", answer: "PROMETHEUS", acceptableAnswers: ["PROMETHEUS", "Î Î¡ÎŸÎœÎ—Î˜Î•Î‘Î£", "Î Î¡ÎŸÎœÎ—Î˜Î•Î¥Î£"], funFact: "Prometheus means 'forethought' in Greek! (Greek: Î ÏÎ¿Î¼Î·Î¸Î­Î±Ï‚)", image: "ğŸ”¥â›“ï¸ğŸ¦…" },
                    { type: "matching", question: "Match heroes to their famous deeds:", pairs: [{ left: "Perseus", right: "Killed Medusa" }, { left: "Theseus", right: "Defeated Minotaur" }, { left: "Odysseus", right: "Trojan Horse" }], funFact: "Greek heroes inspired stories for thousands of years! (Î ÎµÏÏƒÎ­Î±Ï‚, Î˜Î·ÏƒÎ­Î±Ï‚, ÎŸÎ´Ï…ÏƒÏƒÎ­Î±Ï‚)", image: "ğŸ—¡ï¸ğŸ‚ğŸ´" },
                    { type: "multiplechoice", question: "What stayed inside Pandora's Box?", choices: ["Love", "Hope", "Death", "Fear"], answer: "Hope", funFact: "Hope remained so humans could survive all the evils released! (Greek: Î Î±Î½Î´ÏÏÎ± - Î•Î»Ï€Î¯Î´Î±)", image: "ğŸ“¦âœ¨ğŸ™" }
                ],
                rewards: ["âš¡", "ğŸ›ï¸", "ğŸ¦‰", "ğŸ”±", "â­", "ğŸ‘‘"]
            },
            w2review: {
                name: "ğŸ“œ W2: History Review", 
                color: "#3498db",
                questions: [
                    { type: "multiplechoice", question: "Which civilization invented democracy?", choices: ["Romans", "Egyptians", "Greeks", "Persians"], answer: "Greeks", funFact: "Democracy means 'rule by the people'! (Greek: Î”Î·Î¼Î¿ÎºÏÎ±Ï„Î¯Î±)", image: "ğŸ—³ï¸ğŸ‘¥ğŸ‡¬ğŸ‡·" },
                    { type: "riddle", riddle: "I crossed the Alps with elephants tall,\nTo make the mighty Romans fall.\nFrom Carthage I led my force,\nWinning battles on my course!", hint: "Almost conquered Rome!", answer: "HANNIBAL", acceptableAnswers: ["HANNIBAL", "Î‘ÎÎÎ™Î’Î‘Î£", "HANNIBAL BARCA"], funFact: "Hannibal crossed the Alps with 37 elephants! (Greek: Î‘Î½Î½Î¯Î²Î±Ï‚)", image: "ğŸ˜ğŸ”ï¸âš”ï¸" },
                    { type: "matching", question: "Match the event to its date:", pairs: [{ left: "First Olympics", right: "776 BC" }, { left: "Rome founded", right: "753 BC" }, { left: "Rome fell", right: "476 AD" }], funFact: "Ancient history spans thousands of years!", image: "ğŸ“…ğŸ›ï¸â³" },
                    { type: "truefalse", question: "Julius Caesar was the first Roman emperor.", answer: false, correctInfo: "Augustus was the first emperor. Caesar was a dictator!", funFact: "The month July is named after Julius Caesar! (Latin: Iulius / Greek: ÎšÎ±Î¯ÏƒÎ±ÏÎ±Ï‚)", image: "ğŸ›ï¸ğŸ‘¤âŒ" },
                    { type: "multiplechoice", question: "How many Spartans fought at Thermopylae?", choices: ["100", "300", "500", "1000"], answer: "300", funFact: "King Leonidas led the 300 Spartans! (Greek: Î›ÎµÏ‰Î½Î¯Î´Î±Ï‚ & 300 Î£Ï€Î±ÏÏ„Î¹Î¬Ï„ÎµÏ‚)", image: "ğŸ›¡ï¸âš”ï¸ğŸ’ª" },
                    { type: "riddle", riddle: "I conquered from Greece to India's shore,\nAt thirty-two I was no more.\nThey called me 'Great' through the land,\nMy empire vast and grand!", hint: "Young conqueror!", answer: "ALEXANDER", acceptableAnswers: ["ALEXANDER", "ALEXANDER THE GREAT", "Î‘Î›Î•ÎÎ‘ÎÎ”Î¡ÎŸÎ£", "ALEXANDROS"], funFact: "Alexander created one of the largest empires in history! (Greek: Î‘Î»Î­Î¾Î±Î½Î´ÏÎ¿Ï‚ Î¿ ÎœÎ­Î³Î±Ï‚)", image: "ğŸ‘‘ğŸ—¡ï¸ğŸŒ" },
                    { type: "yesno", question: "Did Romans build aqueducts to carry water?", answer: "yes", funFact: "Some Roman aqueducts still stand today! (Latin: Aquaeductus)", image: "ğŸ’§ğŸ›ï¸ğŸŒ‰" },
                    { type: "multiplechoice", question: "What was the Colosseum used for?", choices: ["Theater plays", "Gladiator fights", "Senate meetings", "Markets"], answer: "Gladiator fights", funFact: "The Colosseum could hold 50,000 spectators! (Latin: Colosseum)", image: "ğŸŸï¸âš”ï¸ğŸ‘Š" },
                    { type: "truefalse", question: "Cleopatra was the last pharaoh of Egypt.", answer: true, funFact: "Cleopatra lived closer to our time than to when the pyramids were built! (Greek: ÎšÎ»ÎµÎ¿Ï€Î¬Ï„ÏÎ±)", image: "ğŸ‘¸ğŸ‡ªğŸ‡¬ğŸ" },
                    { type: "riddle", riddle: "In 79 AD I woke from sleep,\nBuried a city in ash so deep.\nPompeii frozen in time that day,\nMy eruption took lives away!", hint: "Famous volcano!", answer: "VESUVIUS", acceptableAnswers: ["VESUVIUS", "MOUNT VESUVIUS", "Î’Î•Î–ÎŸÎ¥Î’Î™ÎŸÎ£", "VESUVIO"], funFact: "Pompeii was preserved so well we can see Roman daily life! (Latin: Vesuvius / Greek: Î’ÎµÎ¶Î¿ÏÎ²Î¹Î¿Ï‚)", image: "ğŸŒ‹ğŸ”¥ğŸ›ï¸" },
                    { type: "matching", question: "Match philosophers to their ideas:", pairs: [{ left: "Socrates", right: "Question everything" }, { left: "Plato", right: "World of forms" }, { left: "Aristotle", right: "Logic & science" }], funFact: "Each philosopher taught the next one! (Î£Ï‰ÎºÏÎ¬Ï„Î·Ï‚, Î Î»Î¬Ï„Ï‰Î½, Î‘ÏÎ¹ÏƒÏ„Î¿Ï„Î­Î»Î·Ï‚)", image: "ğŸ¤”ğŸ’­ğŸ“š" },
                    { type: "multiplechoice", question: "What did Archimedes shout when he made his discovery?", choices: ["Wow!", "Eureka!", "Amazing!", "Victory!"], answer: "Eureka!", funFact: "Eureka means 'I found it!' in Greek! (Greek: Î•ÏÏÎ·ÎºÎ±!)", image: "ğŸ›ğŸ’¡ğŸ˜²" }
                ],
                rewards: ["ğŸ“œ", "â³", "ğŸº", "âš”ï¸", "ğŸ›¡ï¸", "ğŸ†"]
            }
        };
        
        // World 3 uses different level names
        const world3Levels = ['w1review', 'w2review'];

        // ============ GAME STATE ============
        const levelOrder = ['cakewalk', 'easy', 'ok', 'hard', 'extreme'];
        const levelColors = { cakewalk: '#a8e6cf', easy: '#88d8ff', ok: '#ffd93d', hard: '#ff6b6b', extreme: '#9b59b6', w1review: '#ffd700', w2review: '#3498db' };
        
        function getCurrentLevelOrder() {
            return currentWorld === 3 ? world3Levels : levelOrder;
        }
        
        let currentWorld = 1;
        let currentLevelIndex = 0;
        let currentQuestionIndex = 0;
        let totalScore = 0;
        let levelScore = 0;
        let round = 1;
        let cityItems = [];
        let selectedMatch = null;
        let matchedPairs = 0;
        let usedQuestions = {};
        let currentQ = null;
        let wrongAnswers = []; // Track wrong answers for review

        // ============ NAVIGATION ============
        function selectWorld(w) {
            currentWorld = w;
            document.getElementById('worldSelect').style.display = 'none';
            document.getElementById('startScreen').style.display = 'block';
            
            if (w === 1) {
                document.getElementById('gameIcon').textContent = 'âš¡ğŸ›ï¸';
                document.getElementById('gameTitle').textContent = 'Gods & Myths';
                document.getElementById('gameTitle').className = 'game-title';
                document.getElementById('gameSub').textContent = 'Journey to Ancient Greece & Rome!';
                document.getElementById('gameDesc').textContent = 'Explore Mount Olympus and learn about Zeus, Athena, Hercules, and legendary heroes!';
                document.getElementById('startBtn').textContent = 'âš¡ START âš¡';
                document.getElementById('startBtn').className = 'start-btn';
            } else if (w === 2) {
                document.getElementById('gameIcon').textContent = 'ğŸ“œâ³';
                document.getElementById('gameTitle').textContent = 'Timeline & History';
                document.getElementById('gameTitle').className = 'game-title w2';
                document.getElementById('gameSub').textContent = 'Travel Through Ancient Time!';
                document.getElementById('gameDesc').textContent = 'Discover famous battles, empires, inventions, and how ancient people lived!';
                document.getElementById('startBtn').textContent = 'â³ START â³';
                document.getElementById('startBtn').className = 'start-btn w2';
            } else {
                document.getElementById('gameIcon').textContent = 'ğŸ¯ğŸ“';
                document.getElementById('gameTitle').textContent = 'Review Test!';
                document.getElementById('gameTitle').className = 'game-title w3';
                document.getElementById('gameSub').textContent = 'Test Your Knowledge!';
                document.getElementById('gameDesc').textContent = 'Review questions from World 1 (Gods) and World 2 (History)!';
                document.getElementById('startBtn').textContent = 'ğŸ¯ START TEST ğŸ¯';
                document.getElementById('startBtn').className = 'start-btn w3';
            }
        }

        function backToWorldSelect() {
            document.getElementById('startScreen').style.display = 'none';
            document.getElementById('worldSelect').style.display = 'block';
        }

        function getGameData() { 
            if (currentWorld === 1) return world1Data;
            if (currentWorld === 2) return world2Data;
            return world3Data;
        }

        function startGame() {
            currentLevelIndex = 0;
            currentQuestionIndex = 0;
            totalScore = 0;
            levelScore = 0;
            round = 1;
            cityItems = [];
            wrongAnswers = [];
            usedQuestions = {};
            const levels = getCurrentLevelOrder();
            levels.forEach(l => usedQuestions[l] = []);
            
            document.getElementById('startScreen').style.display = 'none';
            document.getElementById('gameScreen').style.display = 'block';
            document.getElementById('cityItems').innerHTML = '';
            
            const wInd = document.getElementById('worldInd');
            if (currentWorld === 1) {
                wInd.textContent = 'ğŸ›ï¸ World 1: Gods & Myths';
                wInd.className = 'world-ind w1';
                document.getElementById('cityTitle').textContent = 'ğŸ™ï¸ Your Ancient City';
            } else if (currentWorld === 2) {
                wInd.textContent = 'ğŸ“œ World 2: Timeline & History';
                wInd.className = 'world-ind w2';
                document.getElementById('cityTitle').textContent = 'ğŸ“œ Your Timeline';
            } else {
                wInd.textContent = 'ğŸ¯ World 3: Review Test';
                wInd.className = 'world-ind w3';
                document.getElementById('cityTitle').textContent = 'ğŸ† Your Trophies';
            }
            
            updateLevelUI();
            showQuestion();
        }

        // ============ GAME LOGIC ============
        function getRandomQuestion(level) {
            const data = getGameData();
            const qs = data[level].questions;
            const used = usedQuestions[level];
            let avail = [];
            for (let i = 0; i < qs.length; i++) { if (!used.includes(i)) avail.push(i); }
            if (avail.length === 0) { usedQuestions[level] = []; avail = qs.map((_, i) => i); }
            const idx = avail[Math.floor(Math.random() * avail.length)];
            usedQuestions[level].push(idx);
            return qs[idx];
        }

        function updateLevelUI() {
            const data = getGameData();
            const levels = getCurrentLevelOrder();
            const level = levels[currentLevelIndex];
            const ld = data[level];
            
            document.getElementById('levelInd').textContent = ld.name;
            document.getElementById('progressFill').style.background = levelColors[level];
            document.getElementById('scoreDisp').textContent = totalScore;
            document.getElementById('roundDisp').textContent = round;
            
            const qc = document.getElementById('qCard');
            qc.classList.remove('extreme-glow', 'hard-glow');
            if (level === 'extreme') qc.classList.add('extreme-glow');
            else if (level === 'hard') qc.classList.add('hard-glow');
        }

        function showQuestion() {
            const levels = getCurrentLevelOrder();
            const level = levels[currentLevelIndex];
            currentQ = getRandomQuestion(level);
            
            const perLevel = 5;
            document.getElementById('progressFill').style.width = (currentQuestionIndex / perLevel * 100) + '%';
            document.getElementById('qNumDisp').textContent = currentQuestionIndex + 1;
            
            document.getElementById('feedback').style.display = 'none';
            document.getElementById('funFact').style.display = 'none';
            document.getElementById('nextBtn').style.display = 'none';
            document.getElementById('nextBtn').className = 'next-btn';
            
            selectedMatch = null;
            matchedPairs = 0;
            
            const qc = document.getElementById('qCard');
            const q = currentQ;
            
            // Create image display
            const imageHtml = q.image ? `<div class="question-image">${q.image}</div>` : '';
            
            switch(q.type) {
                case 'truefalse':
                    qc.innerHTML = `${imageHtml}<span class="q-type">True or False</span><p class="q-text">${q.question}</p>
                        <div class="answers"><button class="ans-btn" onclick="checkTF(true)">âœ“ TRUE</button>
                        <button class="ans-btn" onclick="checkTF(false)">âœ— FALSE</button></div>`;
                    break;
                case 'yesno':
                    qc.innerHTML = `${imageHtml}<span class="q-type">Yes or No</span><p class="q-text">${q.question}</p>
                        <div class="answers"><button class="ans-btn" onclick="checkYN('yes')">ğŸ‘ YES</button>
                        <button class="ans-btn" onclick="checkYN('no')">ğŸ‘ NO</button></div>`;
                    break;
                case 'riddle':
                    qc.innerHTML = `${imageHtml}<span class="q-type">ğŸ§© Riddle!</span>
                        <div class="riddle-box"><div class="riddle-icon">ğŸ¤”</div>
                        <p class="riddle-text">${q.riddle.replace(/\n/g, '<br>')}</p></div>
                        <input type="text" class="riddle-input" id="riddleIn" placeholder="Your answer..." maxlength="30">
                        <div class="riddle-hint">ğŸ’¡ ${q.hint}</div>
                        <button class="submit-btn" onclick="checkRiddle()">Solve!</button>`;
                    document.getElementById('riddleIn').addEventListener('keypress', e => { if (e.key === 'Enter') checkRiddle(); });
                    break;
                case 'multiplechoice':
                    const choicesHtml = q.choices.map(c => `<button class="choice-btn" onclick="checkMC('${c.replace(/'/g, "\\'")}')">${c}</button>`).join('');
                    qc.innerHTML = `${imageHtml}<span class="q-type">Multiple Choice</span><p class="q-text">${q.question}</p>
                        <div class="choices-grid">${choicesHtml}</div>`;
                    break;
                case 'matching':
                    const left = q.pairs.map((p, i) => `<div class="match-item" onclick="selectMatch('left',${i},this)">${p.left}</div>`).join('');
                    const right = [...q.pairs].sort(() => Math.random() - 0.5).map(p => `<div class="match-item" onclick="selectMatch('right','${p.right.replace(/'/g, "\\'")}',this)">${p.right}</div>`).join('');
                    qc.innerHTML = `${imageHtml}<span class="q-type">Matching</span><p class="q-text">${q.question}</p>
                        <div class="match-container"><div class="match-col"><h4>Match From</h4>${left}</div>
                        <div class="match-col"><h4>Match To</h4>${right}</div></div>`;
                    break;
                case 'write':
                    qc.innerHTML = `${imageHtml}<span class="q-type">Write Answer</span><p class="q-text">${q.question}</p>
                        <textarea class="write-input" id="writeIn" placeholder="Write a full sentence... (Capital letter + period!)"></textarea>
                        <p style="color:#7d3c98;font-size:0.85em;margin-top:8px;">ğŸ’¡ Remember: Start with a capital letter, end with a period!</p>
                        <button class="submit-btn" onclick="checkWrite()">Submit</button>`;
                    break;
                case 'order':
                    const shuffled = [...q.items].sort(() => Math.random() - 0.5);
                    const orderHtml = shuffled.map((item, i) => `<div class="order-item" draggable="true" data-order="${item.order}">
                        <span class="order-num">${i + 1}</span><span>${item.text}</span></div>`).join('');
                    qc.innerHTML = `${imageHtml}<span class="q-type">Put In Order</span><p class="q-text">${q.question}</p>
                        <div class="order-list" id="orderList">${orderHtml}</div>
                        <button class="submit-btn" onclick="checkOrder()">Check Order</button>`;
                    setupDragDrop();
                    break;
            }
        }

        // ============ ANSWER CHECKING ============
        function checkTF(ans) {
            const correct = ans === currentQ.answer;
            if (!correct) addWrongAnswer(currentQ, currentQ.answer ? "TRUE" : "FALSE");
            showFeedback(correct, currentQ);
            document.querySelectorAll('.ans-btn').forEach(b => b.disabled = true);
        }

        function checkYN(ans) {
            const correct = ans === currentQ.answer;
            if (!correct) addWrongAnswer(currentQ, currentQ.answer.toUpperCase());
            showFeedback(correct, currentQ);
            document.querySelectorAll('.ans-btn').forEach(b => b.disabled = true);
        }

        function checkMC(ans) {
            const correct = ans === currentQ.answer;
            if (!correct) addWrongAnswer(currentQ, currentQ.answer);
            document.querySelectorAll('.choice-btn').forEach(b => {
                if (b.textContent === currentQ.answer) b.classList.add('correct');
                else if (b.textContent === ans && !correct) b.classList.add('incorrect');
                b.disabled = true;
            });
            showFeedback(correct, currentQ);
        }

        function checkRiddle() {
            const userAns = document.getElementById('riddleIn').value.toUpperCase().trim();
            let correct = userAns === currentQ.answer;
            if (!correct && currentQ.acceptableAnswers) {
                correct = currentQ.acceptableAnswers.some(a => userAns === a.toUpperCase() || userAns.includes(a.toUpperCase()));
            }
            if (!correct) addWrongAnswer(currentQ, currentQ.answer);
            showFeedback(correct, currentQ, null, currentQ.answer);
            document.getElementById('riddleIn').disabled = true;
            document.querySelector('.submit-btn').disabled = true;
        }

        function selectMatch(side, value, el) {
            if (el.classList.contains('matched')) return;
            if (!selectedMatch) {
                selectedMatch = { side, value, el };
                el.classList.add('selected');
            } else if (selectedMatch.side === side) {
                selectedMatch.el.classList.remove('selected');
                selectedMatch = { side, value, el };
                el.classList.add('selected');
            } else {
                let isCorrect = false;
                if (selectedMatch.side === 'left') {
                    isCorrect = currentQ.pairs[selectedMatch.value].right === value;
                } else {
                    isCorrect = currentQ.pairs[value].right === selectedMatch.value;
                }
                if (isCorrect) {
                    selectedMatch.el.classList.remove('selected');
                    selectedMatch.el.classList.add('matched');
                    el.classList.add('matched');
                    matchedPairs++;
                    if (matchedPairs === currentQ.pairs.length) showFeedback(true, currentQ);
                } else {
                    selectedMatch.el.classList.add('wrong');
                    el.classList.add('wrong');
                    setTimeout(() => {
                        selectedMatch.el.classList.remove('wrong', 'selected');
                        el.classList.remove('wrong');
                        selectedMatch = null;
                    }, 500);
                    return;
                }
                selectedMatch = null;
            }
        }

        function checkWrite() {
            const ans = document.getElementById('writeIn').value.trim();
            
            // Check for full sentence: starts with capital, ends with punctuation, has at least 3 words
            const startsWithCapital = /^[A-Z]/.test(ans);
            const endsWithPunctuation = /[.!?]$/.test(ans);
            const wordCount = ans.split(/\s+/).filter(w => w.length > 0).length;
            const isFullSentence = startsWithCapital && endsWithPunctuation && wordCount >= 3;
            
            if (ans.length === 0) {
                return; // Don't submit empty
            }
            
            if (!isFullSentence) {
                // Show error message
                const fb = document.getElementById('feedback');
                fb.className = 'feedback incorrect';
                let hint = 'âœï¸ Please write a full sentence! ';
                if (!startsWithCapital) hint += 'Start with a capital letter. ';
                if (!endsWithPunctuation) hint += 'End with a period (.), question mark (?), or exclamation mark (!). ';
                if (wordCount < 3) hint += 'Use at least 3 words. ';
                fb.innerHTML = hint;
                fb.style.display = 'block';
                return;
            }
            
            // Valid full sentence
            showFeedback('neutral', currentQ, "Great answer! Nice full sentence!");
            document.getElementById('writeIn').disabled = true;
            document.querySelector('.submit-btn').disabled = true;
        }

        function setupDragDrop() {
            const list = document.getElementById('orderList');
            const items = list.querySelectorAll('.order-item');
            items.forEach(item => {
                item.addEventListener('dragstart', () => item.classList.add('dragging'));
                item.addEventListener('dragend', () => { item.classList.remove('dragging'); updateOrderNums(); });
            });
            list.addEventListener('dragover', e => {
                e.preventDefault();
                const dragging = document.querySelector('.dragging');
                const siblings = [...list.querySelectorAll('.order-item:not(.dragging)')];
                const next = siblings.find(s => e.clientY < s.getBoundingClientRect().top + s.getBoundingClientRect().height / 2);
                list.insertBefore(dragging, next);
            });
        }

        function updateOrderNums() {
            document.querySelectorAll('.order-item').forEach((item, i) => {
                item.querySelector('.order-num').textContent = i + 1;
            });
        }

        function checkOrder() {
            const items = document.querySelectorAll('.order-item');
            const sorted = [...currentQ.items].sort((a, b) => a.order - b.order);
            let correct = true;
            items.forEach((item, i) => {
                if (parseInt(item.dataset.order) !== sorted[i].order) correct = false;
            });
            if (!correct) {
                const correctOrder = sorted.map(s => s.text).join(' â†’ ');
                addWrongAnswer(currentQ, correctOrder);
            }
            showFeedback(correct, currentQ);
            document.querySelector('.submit-btn').disabled = true;
        }

        // ============ WRONG ANSWERS TRACKING ============
        function addWrongAnswer(question, correctAnswer) {
            let questionText = question.question || question.riddle || "Put in correct order";
            wrongAnswers.push({
                question: questionText,
                correctAnswer: correctAnswer
            });
        }

        // ============ FEEDBACK & PROGRESSION ============
        function showFeedback(correct, q, customMsg = null, correctAns = null) {
            const fb = document.getElementById('feedback');
            const ff = document.getElementById('funFact');
            const nb = document.getElementById('nextBtn');
            
            if (correct === 'neutral') {
                fb.className = 'feedback neutral';
                fb.innerHTML = 'âœ¨ ' + customMsg;
                totalScore++; levelScore++;
            } else if (correct) {
                fb.className = 'feedback correct';
                fb.innerHTML = 'ğŸ‰ Correct!';
                totalScore++; levelScore++;
                addCityItem();
            } else {
                fb.className = 'feedback incorrect';
                let msg = 'âŒ Not quite!';
                if (q.correctInfo) msg += ' ' + q.correctInfo;
                else if (correctAns) msg += ' Answer: ' + correctAns;
                fb.innerHTML = msg;
            }
            
            fb.style.display = 'block';
            document.getElementById('scoreDisp').textContent = totalScore;
            document.getElementById('funFactText').textContent = q.funFact;
            ff.style.display = 'block';
            
            if (currentQuestionIndex < 4) {
                nb.textContent = 'Next Question â†’';
            } else {
                nb.textContent = 'ğŸ‰ Complete Level!';
                nb.classList.add('level-done');
            }
            nb.style.display = 'block';
        }

        function addCityItem() {
            const data = getGameData();
            const levels = getCurrentLevelOrder();
            const level = levels[currentLevelIndex];
            const rewards = data[level].rewards;
            const reward = rewards[Math.floor(Math.random() * rewards.length)];
            cityItems.push(reward);
            
            const container = document.getElementById('cityItems');
            const span = document.createElement('span');
            span.className = 'city-item';
            span.textContent = reward;
            container.appendChild(span);
        }

        function nextQuestion() {
            currentQuestionIndex++;
            if (currentQuestionIndex >= 5) {
                showLevelComplete();
            } else {
                showQuestion();
            }
        }

        function showLevelComplete() {
            document.getElementById('gameScreen').style.display = 'none';
            document.getElementById('levelComplete').style.display = 'block';
            
            const data = getGameData();
            const levels = getCurrentLevelOrder();
            const level = levels[currentLevelIndex];
            
            document.getElementById('lcTitle').textContent = data[level].name + ' Complete!';
            document.getElementById('lcScore').textContent = levelScore;
            document.getElementById('lcTotal').textContent = 5;
            document.getElementById('totalScoreStat').textContent = totalScore;
            document.getElementById('roundStat').textContent = round;
            
            const pct = (levelScore / 5) * 100;
            let badge = pct === 100 ? 'ğŸŒŸ Perfect!' : pct >= 80 ? 'â­ Amazing!' : pct >= 60 ? 'ğŸ‘ Good Job!' : 'ğŸ’ª Keep Going!';
            document.getElementById('lcBadge').textContent = badge;
            
            document.getElementById('cityPreview').innerHTML = cityItems.map(i => `<span>${i}</span>`).join('');
            
            // Show wrong answers review
            const reviewSection = document.getElementById('reviewSection');
            const reviewContent = document.getElementById('reviewContent');
            
            if (wrongAnswers.length > 0) {
                reviewSection.style.display = 'block';
                reviewContent.innerHTML = wrongAnswers.map(w => `
                    <div class="review-item">
                        <div class="review-question">â“ ${w.question}</div>
                        <div class="review-answer">âœ… Correct answer: <span>${w.correctAnswer}</span></div>
                    </div>
                `).join('');
            } else {
                reviewSection.style.display = 'block';
                reviewContent.innerHTML = '<div class="no-wrong">ğŸ‰ Perfect! You got everything right!</div>';
            }
            
            // Clear wrong answers for next level
            wrongAnswers = [];
            
            let nextIdx = currentLevelIndex + 1;
            if (nextIdx >= levels.length) {
                nextIdx = 0;
                document.getElementById('nextPreview').innerHTML = `<h3>ğŸ”„ Round ${round + 1}!</h3><p style="color:#ffd700">${data[levels[0]].name}</p>`;
            } else {
                document.getElementById('nextPreview').innerHTML = `<h3>Next Up:</h3><p>${data[levels[nextIdx]].name}</p>`;
            }
            
            createConfetti();
        }

        function continueToNextLevel() {
            const levels = getCurrentLevelOrder();
            currentLevelIndex++;
            if (currentLevelIndex >= levels.length) {
                currentLevelIndex = 0;
                round++;
            }
            currentQuestionIndex = 0;
            levelScore = 0;
            
            document.getElementById('levelComplete').style.display = 'none';
            document.getElementById('gameScreen').style.display = 'block';
            
            updateLevelUI();
            showQuestion();
        }

        function createConfetti() {
            const colors = ['#ffd700', '#ff6b6b', '#88d8ff', '#a8e6cf', '#9b59b6'];
            const container = document.createElement('div');
            container.className = 'confetti';
            document.body.appendChild(container);
            
            for (let i = 0; i < 50; i++) {
                const piece = document.createElement('div');
                piece.className = 'confetti-piece';
                piece.style.left = Math.random() * 100 + 'vw';
                piece.style.background = colors[Math.floor(Math.random() * colors.length)];
                piece.style.animationDelay = Math.random() * 2 + 's';
                piece.style.animationDuration = (Math.random() * 2 + 2) + 's';
                container.appendChild(piece);
            }
            
            setTimeout(() => container.remove(), 5000);
        }
    </script>
</body>
</html>